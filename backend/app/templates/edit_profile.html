{% extends "base.html" %}

{% set background_image = url_for('static', filename='images/edit_profile_background.jpg') %}

{% block title %}Edit Your Profile - Matchito{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center text-white">Complete Your Profile</h1>

    <form action="{{ url_for('profiles.edit_profile') }}" method="POST" class="mt-4">
        <div class="mb-3">
            <input type="text" name="first_name" class="form-control" value="{{ profile[0] if profile else '' }}" placeholder="First Name" required>
        </div>
        <div class="mb-3">
            <input type="text" name="last_name" class="form-control" value="{{ profile[1] if profile else '' }}" placeholder="Last Name" required>
        </div>
        <div class="mb-3">
            <textarea name="bio" class="form-control" placeholder="Tell us about yourself" required>{{ profile[2] if profile else '' }}</textarea>
        </div>
        <div class="mb-3">
            <input type="text" name="profile_picture" class="form-control" value="{{ profile[3] if profile else '' }}" placeholder="Profile Picture URL" required>
        </div>

        <!-- Interests Selection Using Tagify -->
        <div class="mb-3">
            <label for="interests">Select Your Interests:</label>
            <input name="interests" id="interests-input" value="{% for interest in user_interests %}{{ interest }}, {% endfor %}">
        </div>

        <button type="submit" class="btn btn-primary w-100">Save & Continue</button>
    </form>
</div>

<!-- Include Tagify Library -->
<link rel="stylesheet" href="https://unpkg.com/@yaireo/tagify/dist/tagify.css">
<script src="https://unpkg.com/@yaireo/tagify"></script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
      var input = document.querySelector('#interests-input');

      var tagify = new Tagify(input, {
          whitelist: ["Sports", "Music", "Art", "Technology", "Reading", "Travel", "Cooking", "Gaming", "Fitness"],
          dropdown: {
              maxItems: 10,
              classname: "tags-look",
              enabled: 0, // Always show the dropdown
              closeOnSelect: false
          }
      });

      // If interests already exist, prepopulate them
      var existingInterests = [{% for interest in user_interests %}"{{ interest }}",{% endfor %}];
      tagify.addTags(existingInterests);
  });
</script>
{% endblock %}











